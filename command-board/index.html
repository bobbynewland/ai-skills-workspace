<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Skills Studio - Command Board</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1>ğŸš€ AI Skills Studio</h1>
            <p>Enter workspace credentials</p>
            <input type="text" id="syncIdInput" placeholder="Workspace ID" value="winslow-main">
            <div style="position: relative;">
                <input type="password" id="passwordInput" placeholder="Password" value="WinDev2026@@" style="padding-right: 50px;">
                <button onclick="togglePassword()" style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%); background: transparent; border: none; color: #888; cursor: pointer; padding: 10px; font-size: 0.9rem;">ğŸ‘ï¸</button>
            </div>
            <button onclick="joinWorkspace()">Join Workspace</button>
            <div class="hint">Secure workspace - admin only</div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <div class="app-header">
            <div class="workspace-info">
                <span class="workspace-name" id="workspaceName">Workspace</span>
                <span class="sync-status online" id="syncStatus">ğŸŸ¢ Online</span>
            </div>
            <button class="btn-secondary" onclick="logout()">Switch Workspace</button>
        </div>

        <div class="header">
            <h1>Command Board</h1>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchView('board')">ğŸ“‹ Tasks</button>
            <button class="nav-tab" onclick="switchView('docs')">ğŸ“ Docs</button>
            <button class="nav-tab" onclick="switchView('files')">ğŸ“ Files</button>
            <button class="nav-tab" onclick="switchView('credits')">ğŸ’³ Credits</button>
        </div>

        <!-- Tasks View -->
        <div id="boardView" class="board">
            <div class="column todo" ondragover="allowDrop(event)" ondrop="drop(event, 'todo')">
                <div class="column-header">
                    <span class="column-title">ğŸ“‹ To Do</span>
                    <span class="column-count" id="count-todo">0</span>
                </div>
                <div id="col-todo"></div>
                <button class="add-btn" onclick="openTaskModal()">+ Add Task</button>
            </div>
            <div class="column progress" ondragover="allowDrop(event)" ondrop="drop(event, 'progress')">
                <div class="column-header">
                    <span class="column-title">ğŸ”¥ In Progress</span>
                    <span class="column-count" id="count-progress">0</span>
                </div>
                <div id="col-progress"></div>
            </div>
            <div class="column review" ondragover="allowDrop(event)" ondrop="drop(event, 'review')">
                <div class="column-header">
                    <span class="column-title">ğŸ‘€ Review</span>
                    <span class="column-count" id="count-review">0</span>
                </div>
                <div id="col-review"></div>
            </div>
            <div class="column done" ondragover="allowDrop(event)" ondrop="drop(event, 'done')">
                <div class="column-header">
                    <span class="column-title">âœ… Done</span>
                    <span class="column-count" id="count-done">0</span>
                </div>
                <div id="col-done"></div>
            </div>
        </div>

        <!-- Docs View -->
        <div id="docsView" class="docs-view">
            <div class="docs-layout">
                <button class="docs-toggle" onclick="toggleDocsSidebar()" id="docsToggleBtn">ğŸ“ Show Documents</button>
                <div class="docs-sidebar" id="docsSidebar">
                    <h3>ğŸ“ Documents</h3>
                    <div id="docList"></div>
                    <button class="add-btn" onclick="createDoc()">+ New Document</button>
                </div>
                <div class="doc-editor">
                    <div class="editor-toolbar">
                        <button onclick="copyDoc()">ğŸ“‹ Copy</button>
                        <button onclick="downloadDoc()">ğŸ’¾ Download</button>
                        <button onclick="deleteDoc()" style="color: #ff6b6b;">ğŸ—‘ï¸ Delete</button>
                        <span id="saveStatus" style="margin-left: auto; color: #666;"></span>
                    </div>
                    <input type="text" id="docTitle" class="doc-title" placeholder="Document Title" oninput="saveDoc()">
                    <textarea id="docContent" class="doc-content" placeholder="Start typing... Real-time collaboration enabled!&#10;&#10;Perfect for:&#10;- Meeting notes&#10;- Content scripts&#10;- Ideas & brainstorming&#10;- Project documentation" oninput="saveDoc()"></textarea>
                </div>
            </div>
        </div>

        <!-- Files View -->
        <div id="filesView" class="files-view">
            <div class="files-container">
                <div class="upload-area" id="uploadArea" ondrop="dropFiles(event)" ondragover="allowDropFiles(event)">
                    <div class="upload-icon">ğŸ“</div>
                    <p>Drag & drop files here</p>
                    <p style="color: #888; font-size: 0.9rem;">or</p>
                    <input type="file" id="fileInput" multiple onchange="handleFiles(this.files)" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">Select Files</button>
                </div>
                <div class="file-list" id="fileList">
                    <h3 style="color: #00d4ff; margin-bottom: 15px;">ğŸ“‚ Uploaded Files</h3>
                    <div id="filesListContent">
                        <p style="color: #666; text-align: center; padding: 40px;">No files uploaded yet</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Credits View -->
        <div id="creditsView" class="credits-view">
            <div class="credits-container">
                <div class="credits-header">
                    <h2>ğŸ’³ API Credit Monitor</h2>
                    <p class="credits-subtitle">Track your NVIDIA free credits and Moonshot usage</p>
                </div>
                <div id="creditsContent">
                    <div class="credits-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading credit data...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Modal -->
    <div id="taskModal" class="modal" onclick="if(event.target===this)closeTaskModal()">
        <div class="modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 id="modalTitle">New Task</h2>
            <input type="hidden" id="taskId">
            <div class="form-group">
                <label>Title</label>
                <input type="text" id="taskTitle" placeholder="Task title">
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea id="taskDesc" placeholder="Description (optional)"></textarea>
            </div>
            <div class="form-group">
                <label>Category</label>
                <select id="taskCategory">
                    <option value="marketing">ğŸ“¢ Marketing</option>
                    <option value="dev">ğŸ’» Development</option>
                    <option value="content">âœï¸ Content</option>
                    <option value="ops">âš™ï¸ Operations</option>
                    <option value="client">ğŸ‘¤ Client</option>
                </select>
            </div>
            <div class="form-group">
                <label>Priority</label>
                <select id="taskPriority">
                    <option value="high">ğŸ”´ High</option>
                    <option value="medium" selected>ğŸŸ¡ Medium</option>
                    <option value="low">ğŸŸ¢ Low</option>
                </select>
            </div>
            <div class="form-group" id="columnGroup" style="display: none;">
                <label>Column</label>
                <select id="taskColumn">
                    <option value="todo">ğŸ“‹ To Do</option>
                    <option value="progress">ğŸ”¥ In Progress</option>
                    <option value="review">ğŸ‘€ Review</option>
                    <option value="done">âœ… Done</option>
                </select>
            </div>
            
            <!-- Checklist Section -->
            <div class="checklist-section" id="checklistSection" style="display: none;">
                <div class="checklist-header">
                    <span class="checklist-title">â˜‘ï¸ Checklist</span>
                    <span class="checklist-progress-text" id="checklistProgressText">0/0</span>
                </div>
                <div class="checklist-progress">
                    <div class="checklist-progress-bar">
                        <div class="checklist-progress-fill" id="checklistProgressBar" style="width: 0%"></div>
                    </div>
                    <span id="checklistPercent">0%</span>
                </div>
                <div class="checklist-items" id="checklistItems"></div>
                <div class="checklist-add">
                    <input type="text" id="newChecklistItem" placeholder="Add an item..." onkeypress="if(event.key==='Enter')addChecklistItem()">
                    <button class="btn btn-primary btn-small" onclick="addChecklistItem()">Add</button>
                </div>
            </div>
            
            <!-- Task Files Section -->
            <div class="task-files-section" id="taskFilesSection" style="display: none;">
                <div class="task-files-header">ğŸ“ Attachments</div>
                <div class="task-file-upload">
                    <input type="file" id="taskFileInput" multiple onchange="uploadTaskFiles(this.files)">
                    <label for="taskFileInput" class="task-file-upload-btn">+ Upload Files</label>
                </div>
                <div class="task-files-list" id="taskFilesList"></div>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="saveTask()">Save</button>
                <button class="btn btn-secondary" onclick="closeTaskModal()">Cancel</button>
                <button class="btn btn-danger" id="deleteTaskBtn" onclick="deleteTask()" style="display: none;">Delete</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script src="credits-monitor.js"></script>
</body>
</html>
